<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Russell Gray" />
        <meta name="copyright" content="Russell Gray" />

        <link rel="author" href=https://plus.google.com/u/0/102559471807447493728 />
        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="coding, refactoring, software engineering, development, " />

<meta property="og:title" content="Legacy Code, Refactoring, and Ownership "/>
<meta property="og:url" content="./legacy-code-refactoring-and-ownership.html" />
<meta property="og:description" content="Refactoring is good. Everyone knows that. Since Fowler popularised the concept with the seminal Refactoring it&#39;s become a staple of the industry, and has pride of place on many a bookshelf. In the many, many articles and discussions of the subject, the key goals and benefits of refactoring are generally …" />
<meta property="og:site_name" content="Basildon Coder" />
<meta property="og:article:author" content="Russell Gray" />
<meta property="og:article:published_time" content="2007-12-13T17:26:00+00:00" />
<meta name="twitter:title" content="Legacy Code, Refactoring, and Ownership ">
<meta name="twitter:description" content="Refactoring is good. Everyone knows that. Since Fowler popularised the concept with the seminal Refactoring it&#39;s become a staple of the industry, and has pride of place on many a bookshelf. In the many, many articles and discussions of the subject, the key goals and benefits of refactoring are generally …">

        <title>Legacy Code, Refactoring, and Ownership  · Basildon Coder
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="./theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="./theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="./theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="./theme/css/custom.css" media="screen">
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <div class="span1"></div>
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="./"><span class=site-name>Basildon Coder</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href=".">Home</a></li>
                            <li ><a href="./categories.html">Categories</a></li>
                            <li ><a href="./tags.html">Tags</a></li>
                            <li ><a href="./archives.html">Archives</a></li>
                            <li><form class="navbar-search" action="./search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article>
<div class="row-fluid">
    <header class="page-header span10 offset2">
    <h1><a href="./legacy-code-refactoring-and-ownership.html"> Legacy Code, Refactoring, and Ownership  </a></h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">

            
            <p>Refactoring is good. Everyone knows that. Since Fowler popularised the concept
with the seminal <a href="http://www.amazon.co.uk/Refactoring-Improving-Design-Existing-Technology/dp/0201485672/"><em>Refactoring</em></a> it's become a staple of the industry, and
has pride of place on many a bookshelf. In the many, many articles and
discussions of the subject, the key goals and benefits of refactoring are
generally taken to be the improvement of readability, testability, decoupling,
and other similar worthy ideals. For me, however, there is another very
distinct benefit, often overlooked. Fowler touches upon it, but doesn't really
develop it, early on in <em>Refactoring</em>:</p>
<blockquote>
<p>I use refactoring to help me understand unfamiliar code. When I look at
unfamiliar code, I have to try to understand what it does. I look at a couple
of lines and say to myself, oh yes, that's what this bit of code is doing.
With refactoring I don't stop at the mental note. I actually change the code
to better reflect my understanding, and then I test that understanding by
rerunning the code to see if it still works.</p>
<p><cite>(Fowler, <em>Refactoring</em>, 1999)</cite></p>
</blockquote>
<p>By investigating a piece of code thoroughly enough to understand how it works,
refactoring it to map directly on to your understanding, and reinforcing
everything with good unit tests, you take <em>ownership</em> of the code. It's yours
now.</p>
<p>This is very important, psychologically. Almost every developer feels more at
home with their own code than somebody else's. That's why you feel
uncomfortable and deflated when, 20 minutes into deciphering a nasty bit of
opaque gibberish, you realise it was something you yourself wrote a year
earlier and subsequently forgot about.</p>
<p>When you refactor, you rewrite code to a greater or lesser extent. Having done
so, the resulting feeling of ownership (alongside increased understanding, of
course) makes the code much less scary. The benefit of this is less marked in
agile methodologies or TDD, of course, since in those cases quite often the
code you are refactoring was written by you anyway. Working with legacy code,
though, it's a big deal.</p>
<p>In the preface to <a href="http://www.amazon.co.uk/Working-Effectively-Legacy-Robert-Martin/dp/0131177052/"><em>Working Effectively With Legacy Code</em></a>, Feathers asks
"what do you think about when you hear the term <em>legacy code</em>?" (Feathers,
2004). He answers by stating that the standard definition is "difficult-to-
change code that we don't understand" and adds his own preferred definition
which is, in essence, "code without tests".</p>
<p>My own definition of legacy code would include, in many cases, code that
<em>isn't mine</em>. By 'mine' I don't exclusively mean code I wrote personally; I
also mean code written by my team, or even code written by people who sit a
couple of desks down who I can go and pester about it (which is stretching the
definition a bit, admittedly).</p>
<p>In short, legacy code for me is code that no longer has any accessible owner.
Like a stray cat or dog, code without an owner goes feral. Refactoring is the
process of taming feral code, but as with stray cats much of the benefit comes
from re-homing. This is a vital process, even if a fairly unconscious one.
When you first come face to face with some hideous 5000-line spaghetti monster
of a function your heart sinks - how can anyone ever hope to understand that,
let alone modify it safely? Especially if the only people that ever worked
with it left the company 3 years ago?</p>
<p>Refactoring allows you to split this code up, create classes to better
represent the problem domain, improve abstraction, add tests, and all that
other good stuff; at the same time, the process of doing so makes the code
yours. You make the decisions about the classes to create and the abstractions
to introduce. You write the tests that ferret out all the little
idiosyncrasies, and uncover the unwritten assumptions. By the end of the
process, the code feels like yours. And that means that the next time you have
to make a change there, you benefit from the double whammy of code that is not
only well-written and tested, but recognisably <em>yours</em>; and that's the kind of
code that you won't mind working with.</p>
            
            
    <div class="accordion" id="accordion2">
        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#comments">
                Comments (5) </a>
            </div>

            <div id="comments" class="accordion-body collapse">
                <div class="accordion-inner">
                    <div class="comments">
                        <ul>
                            <li>Tony Morris said: <blockquote>
<p>Refactoring is good. Everyone knows that.</p>
</blockquote>
<p>This is called an argumentum ad populum logical fallacy. Logical fallacies are
very prolific in hyperbolic material such that which purports refactoring as
anything but a perversion of science.</p>
<p>There exists one person who doesn't "know that Refactoring is good" and
actively refutes the truth value of this statement (it is so false that the
inverse is true). I wrote an article titled Refunctoring quite some time ago;
I'&#39;'ll happily support my position with evidence and reason upon request.</p>
<p>I bring this to your attention so as not to continue the proliferation of
mythology and mislead potentially innocent bystanders into a similar state of
delusion.</p></li>
                            <li>JS said: <p>After all,'terrible code' is by definition any software code you yourself
didn't write.  Right?</p></li>
                            <li>russ said: <blockquote>
<p>I bring this to your attention so as not to continue the proliferation of
mythology and mislead potentially innocent bystanders into a similar state
of delusion.</p>
</blockquote>
<p>The phrase "everyone knows that" was intended to be slightly tongue-in-cheek,
which I had hoped would be picked up by being unnecessarily sweeping and all-
encompassing. Generally speaking I think it's a good thing, but I also think
Steve Yegge hit the nail on the head when he said that refactoring had become
the <a href="http://steve.yegge.googlepages.com/transformation">goal rather than the cure</a>.</p>
<p>I read your <a href="https://tonymorris.github.io/blog/posts/refunctoring/">Refunctoring</a> article and largely agree with it; I code C# for
a living and often find myself edging towards a functional style for certain
problems. However, I think you're a bit strident; not all refactoring is
simply a progression towards using map, foldr, and filter; similarly, I think
you're overly harsh on Java and C#. C# at least is moving in interesting
directions - LINQ is providing something very similar to (if more verbose
than) Haskell's list comprehensions, and also now supports lambdas and a form
of type inference. Whilst it's never going to be as much fun writing C# as it
is to write Haskell or Ruby (which are my preferred languages outside the
office, along with Ocaml), it's encouraging that such a mainstream language is
starting to "get it".</p>
<p>I hold my hand up and concede that my phrasing didn't really communicate any
of this. Sorry. I'm just getting used to blogging and realise I need to be
careful about how people interpret my writing.</p></li>
                            <li>russ said: <blockquote>
<p>After all, 'terrible code' is by definition any software code you yourself
didn't write. Right?</p>
</blockquote>
<p>Oh give it a rest, that's not what I said. Why have you put 'terrible code' in
quote marks as if you're quoting me, when that phrase appears nowhere in the
article? In fact, the whole point of the post is that there are benefits to
refactoring beyond simply trying to improve code. You understood that, though.
Right?</p></li>
                            <li>CD said: <p>Refactoring isn't a pain in the boss?</p>
<p>i've  refactored terrible code from prolog to msx basic, then to msx basic II
turbo, then to quick basic and to pascal.</p>
<p>I think i have enough bacground to discuss refactoring with my boss who
actually fired me for trying to explain him what refactoring means.</p>
<p>Now i am a jobless .net programmer. wanna work with me? i take some time to
refactor. when you work on legacy code your own brain refactors.!</p></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
            <hr/>
            <aside>
            <nav>
            <ul class="articles-timeline">
                <li class="previous-article">« <a href="./coding-by-convention.html" title="Previous: Coding by Convention">Coding by Convention</a></li>
                <li class="next-article"><a href="./turbocharging-net-webservice-clients.html" title="Next: Turbocharging .Net Webservice Clients">Turbocharging .Net Webservice Clients</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2007-12-13T17:26:00+00:00">Dec 13, 2007</time>
            <h4>Category</h4>
            <a class="category-link" href="./categories.html#development-ref">development</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="./tags.html#coding-ref">coding
                    <span>13</span>
</a></li>
                <li><a href="./tags.html#refactoring-ref">refactoring
                    <span>1</span>
</a></li>
                <li><a href="./tags.html#software-engineering-ref">software engineering
                    <span>8</span>
</a></li>
            </ul>
<h4>Contact</h4>
    <a href="http://twitter.com/russgray" title="My Twitter Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-twitter sidebar-social-links"></i></a>
    <a href="http://github.com/russgray" title="My Github Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-github sidebar-social-links"></i></a>
    <a href="http://uk.linkedin.com/in/russgray/" title="My LinkedIn Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-linkedin sidebar-social-links"></i></a>
    <a href="mailto:russgray@gmail.com" title="My Email Address" class="sidebar-social-links" target="_blank">
    <i class="fa fa-envelope sidebar-social-links"></i></a>
        </div>
        </section>
</div>
</article>
                </div>
                <div class="span1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a></li>
    </ul>
</div>
</footer>            <script src="https://code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    
    </body>
    <!-- Theme: Elegant built for Pelican
    License : http://oncrashreboot.com/pelican-elegant -->
</html>